(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{492:function(t,_,v){"use strict";v.r(_);var a=v(1),s=Object(a.a)({},(function(){var t=this,_=t._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"开发文档"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#开发文档"}},[t._v("#")]),t._v(" 开发文档")]),t._v(" "),_("h2",{attrs:{id:"主要功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#主要功能"}},[t._v("#")]),t._v(" 主要功能")]),t._v(" "),_("p",[t._v("本次设计开发一个花坊售花系统，系统中分两类系统管理员和普通顾客。系统管理员能对系统中的花卉信息进行查询，增加，删除，修改，顾客可以通过指令进行购买花卉，如有疑问，也可咨询机器人。")]),t._v(" "),_("h2",{attrs:{id:"关于配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#关于配置"}},[t._v("#")]),t._v(" 关于配置")]),t._v(" "),_("h3",{attrs:{id:"python"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#python"}},[t._v("#")]),t._v(" python")]),t._v(" "),_("p",[t._v("请先安装python版本>=3.10，记得勾选环境变量选项")]),t._v(" "),_("h3",{attrs:{id:"pycharm"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#pycharm"}},[t._v("#")]),t._v(" pycharm")]),t._v(" "),_("p",[t._v("设置中文：打开pycharm编译器，->file->settings->plugins->搜索Chinese 安装")]),t._v(" "),_("p",[t._v("安装第三方库：")]),t._v(" "),_("p",[t._v('打开设置->项目->python解释器->"+"进行添加所需要的库')]),t._v(" "),_("h3",{attrs:{id:"sqlite3数据库"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#sqlite3数据库"}},[t._v("#")]),t._v(" sqlite3数据库")]),t._v(" "),_("p",[t._v("无需配置，运行bot.py后会自动创建数据库文件")]),t._v(" "),_("h3",{attrs:{id:"chatgpt配置"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#chatgpt配置"}},[t._v("#")]),t._v(" chatgpt配置")]),t._v(" "),_("h5",{attrs:{id:"参数说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#参数说明"}},[t._v("#")]),t._v(" 参数说明")]),t._v(" "),_("p",[t._v("config/naturel_gpt_config.yml")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",{staticStyle:{"text-align":"center"}},[t._v("参数名")]),t._v(" "),_("th",[t._v("类型")]),t._v(" "),_("th",[t._v("释义")]),t._v(" "),_("th",[t._v("默认值")]),t._v(" "),_("th",[t._v("编辑建议")])])]),t._v(" "),_("tbody",[_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("ADMIN_USERID")]),t._v(" "),_("td",[t._v("array")]),t._v(" "),_("td",[t._v("管理员 id，以字符串列表方式填入")]),t._v(" "),_("td",[t._v("['']")]),t._v(" "),_("td",[t._v("只有管理员可删除预设")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("OPENAI_API_KEY")]),t._v(" "),_("td",[t._v("array")]),t._v(" "),_("td",[t._v("OpenAi 的 `Api_Key，以字符串列表方式填入")]),t._v(" "),_("td",[t._v("['sak-xxxx']")]),t._v(" "),_("td",[t._v("请自行替换为你的 Api_Key")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("REPLY_ON_AT")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("在被 "),_("code",[t._v("@TA")]),t._v(" 时回复")]),t._v(" "),_("td",[t._v("True")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("REPLY_ON_NAME_MENTION")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("在被 "),_("code",[t._v("提及")]),t._v(" 时回复")]),t._v(" "),_("td",[t._v("True")]),t._v(" "),_("td",[_("code",[t._v("提及")]),t._v(" 即用户发言中含有当前 bot 人格名")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("REPLY_ON_WELCOME")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("在 "),_("code",[t._v("新成员加入")]),t._v(" 时回复")]),t._v(" "),_("td",[t._v("True")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("PRESETS")]),t._v(" "),_("td",[t._v("dict")]),t._v(" "),_("td",[t._v("人格预设集合")]),t._v(" "),_("td",[t._v("略")]),t._v(" "),_("td",[t._v("默认有四个预设，详见生成的配置文件")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_DATA_PATH")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("数据文件目录")]),t._v(" "),_("td",[t._v("./data/naturel_gpt/")]),t._v(" "),_("td",[t._v("保存实现数据持久化")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_ENABLE_EXT")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否启用聊天自定义扩展")]),t._v(" "),_("td",[t._v("True")]),t._v(" "),_("td",[t._v("开启后 bot 可使用扩展功能，会额外消耗 token（取决于扩展描述，如未安装任何扩展务必关闭）")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_MSG_PRIORITY")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("消息响应优先级")]),t._v(" "),_("td",[t._v("99")]),t._v(" "),_("td",[t._v("大于 1，数值越大优先级越低")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_TO_ME")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("响应命令是否需要@bot")]),t._v(" "),_("td",[t._v("False")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("ENABLE_COMMAND_TO_IMG")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否将 rg 相关指令通过图片输出")]),t._v(" "),_("td",[t._v("False")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("ENABLE_MSG_TO_IMG")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否将机器人回复通过图片输出")]),t._v(" "),_("td",[t._v("False")]),t._v(" "),_("td")]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_BLOCK_OTHERS")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否拦截其它插件的响应")]),t._v(" "),_("td",[t._v("False")]),t._v(" "),_("td",[t._v("开启后可能导致优先级低于本插件的其他插件不响应")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_MAX_RESPONSE_PER_MSG")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("每条消息最大回复次数")]),t._v(" "),_("td",[t._v("5")]),t._v(" "),_("td",[t._v("限制 bot 针对每条信息最大回复次数，避免封禁")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_ENABLE_MSG_SPLIT")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否允许消息分割发送")]),t._v(" "),_("td",[t._v("True")]),t._v(" "),_("td",[t._v("如果允许，bot 有可能会在一次回复中发送多条消息")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("NG_ENABLE_AWAKE_IDENTITIES")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否允许自动唤醒其它人格")]),t._v(" "),_("td",[t._v("True")]),t._v(" "),_("td",[t._v("如果允许，bot 在检测到未启用人格呼叫时会自动唤醒并切换人格")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("FORBIDDEN_USERS")]),t._v(" "),_("td",[t._v("array")]),t._v(" "),_("td",[t._v("黑名单用户 id，以字符串列表方式填入")]),t._v(" "),_("td",[t._v("['']")]),t._v(" "),_("td",[t._v("黑名单中的用户消息不会被记录和响应设")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("UNLOCK_CONTENT_LIMIT")]),t._v(" "),_("td",[t._v("bool")]),t._v(" "),_("td",[t._v("是否解锁内容限制")]),t._v(" "),_("td",[t._v("False")]),t._v(" "),_("td",[t._v("可能导致 OpenAi 账号风险，请自行承担后果")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("OPENAI_PROXY_SERVER")]),t._v(" "),_("td",[t._v("str")]),t._v(" "),_("td",[t._v("请求 OpenAI 的代理服务器")]),t._v(" "),_("td",[t._v("''")]),t._v(" "),_("td",[t._v("填写示例 '127.0.0.1:1234' 或 'username:password@127.0.0.1:1234'")])]),t._v(" "),_("tr",[_("td",{staticStyle:{"text-align":"center"}},[t._v("DEBUG_LEVEL")]),t._v(" "),_("td",[t._v("int")]),t._v(" "),_("td",[t._v("DEBUG 等级")]),t._v(" "),_("td",[t._v("0")]),t._v(" "),_("td",[t._v("等级越高 debug 信息越详细")])])])]),t._v(" "),_("h2",{attrs:{id:"使用说明"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#使用说明"}},[t._v("#")]),t._v(" 使用说明")]),t._v(" "),_("p",[t._v("1.请先配置好go-cqhttp协议(只用修改我文件夹的config.yml文件里面)，当然这个我这里配置好了的，你只需要更改QQ的UIN(账号)和password(密码)即可(这里是机器人的账号和密码)")]),t._v(" "),_("p",[t._v("2.在我的kaptreebot目录下面有两个文件.env.dev和.env.prod，请在里面修改成你的QQ号（这里是管理员账号）")]),t._v(" "),_("p",[t._v("3.打开config/naturel_gpt_config.yml，更改ADMIN_USERID为管理员账号，OPENAI_API_KEYS为申请的openai的密钥（注：国内不能访问，所以需要用到魔法）")]),t._v(" "),_("p",[t._v("4.安装所需要的第三方库")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ -r requirements.txt\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br")])]),_("p",[t._v("注：如果权限不够可以以管理员身份运行终端")]),t._v(" "),_("p",[t._v("5.运行go-cqhttp.bat文件 ")]),t._v(" "),_("p",[t._v("6.在py编译器打开kaptreebot文件夹，然后运行bot.py文件")]),t._v(" "),_("h5",{attrs:{id:"chatgpt人设指令"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#chatgpt人设指令"}},[t._v("#")]),t._v(" chatgpt人设指令")]),t._v(" "),_("ul",[_("li",[t._v('别称: "人格"、"n人格设定"、"identity"')]),t._v(" "),_("li",[t._v("功能: 查看当前可用人格预设列表和基本的插件帮助")]),t._v(" "),_("li",[t._v('(*) 管理员帮助命令——"rg admin"')])]),t._v(" "),_("h6",{attrs:{id:"人设切换"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#人设切换"}},[t._v("#")]),t._v(" 人设切换")]),t._v(" "),_("ul",[_("li",[t._v("指令: "),_("code",[t._v("rg set <人格名>")]),t._v(" "),_("ul",[_("li",[t._v("功能: 用于切换会话人格")])])])]),t._v(" "),_("h6",{attrs:{id:"人设创建"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#人设创建"}},[t._v("#")]),t._v(" 人设创建")]),t._v(" "),_("ul",[_("li",[t._v("指令: "),_("code",[t._v("rg new <人格名>人设描述")]),t._v(" "),_("ul",[_("li",[t._v("功能: 用于新建会话人格")])])])]),t._v(" "),_("h6",{attrs:{id:"人设编辑"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#人设编辑"}},[t._v("#")]),t._v(" 人设编辑")]),t._v(" "),_("ul",[_("li",[t._v("指令: "),_("code",[t._v("rg uodate <人设名> 人设描述")]),t._v(" "),_("ul",[_("li",[t._v("功能: 用于修改会话人格")])])])]),t._v(" "),_("h6",{attrs:{id:"人设删除"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#人设删除"}},[t._v("#")]),t._v(" 人设删除")]),t._v(" "),_("ul",[_("li",[_("h6",{attrs:{id:"指令-rg-删除-人设名"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#指令-rg-删除-人设名"}},[t._v("#")]),t._v(" 指令: "),_("code",[t._v("rg 删除 <人设名>")])]),t._v(" "),_("ul",[_("li",[t._v("功能: 用于删除会话人格")])])])]),t._v(" "),_("h6",{attrs:{id:"人设查询"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#人设查询"}},[t._v("#")]),t._v(" 人设查询")]),t._v(" "),_("ul",[_("li",[t._v("指令: "),_("code",[t._v("rg query <人设名>")]),t._v(" "),_("ul",[_("li",[t._v("功能: 用于查询会话人格")])])])]),t._v(" "),_("h2",{attrs:{id:"运行效果"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#运行效果"}},[t._v("#")]),t._v(" 运行效果")]),t._v(" "),_("p",[t._v("1 、go-cqhttp运行界面")]),t._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:\\Users\\16325\\AppData\\Roaming\\Typora\\typora-user-images\\image-20230409112636650.png",alt:"image-20230409112636650"}}),t._v(" "),_("p",[t._v("2 、bot1运行界面")]),t._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:/Users/16325/AppData/Local/Temp/ksohtml43744/wps2.jpg",alt:"img"}}),t._v(" "),_("p",[t._v("3 指令帮助")]),t._v(" "),_("img",{staticStyle:{zoom:"33%"},attrs:{src:"C:\\Users\\16325\\AppData\\Roaming\\Typora\\typora-user-images\\image-20230412152424496.png",alt:"image-20230412152424496"}}),t._v(" "),_("p",[t._v("4 、机器人人设")]),t._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:/Users/16325/AppData/Local/Temp/ksohtml43744/wps4.jpg",alt:"img"}}),t._v(" "),_("p",[t._v("5 、咨询机器人")]),t._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:/Users/16325/AppData/Local/Temp/ksohtml43744/wps5.jpg",alt:"img"}}),t._v(" "),_("p",[t._v("6 购买鲜花基本流程")]),t._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:/Users/16325/AppData/Local/Temp/ksohtml43744/wps6.jpg",alt:"img"}}),t._v(" "),_("p",[t._v("7.一些管理员功能")]),t._v(" "),_("img",{staticStyle:{zoom:"50%"},attrs:{src:"C:\\Users\\16325\\AppData\\Roaming\\Typora\\typora-user-images\\image-20230409111219664.png",alt:"image-20230409111219664"}}),t._v(" "),_("p",[t._v("8.统计图")]),t._v(" "),_("p",[_("img",{attrs:{src:"C:%5CUsers%5C16325%5CDesktop%5C%E4%BD%9C%E5%93%81%5C1.png",alt:"1"}})]),t._v(" "),_("h2",{attrs:{id:"目前实现功能"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#目前实现功能"}},[t._v("#")]),t._v(" 目前实现功能")]),t._v(" "),_("div",{staticClass:"language- line-numbers-mode"},[_("pre",{pre:!0,attrs:{class:"language-text"}},[_("code",[t._v("1、<我要买花>进入花语轩，初始化用户信息\n2、<我的信息>获取本人信息\n\n3、<鲜花列表> 获取花坊所有花卉\n#4、<查询鲜花 花名> 获取该花信息\n5、<购买鲜花 花名1 数量/花名2 数量2> 购买鲜花\n#6、<添加鲜花 花名 颜色 价格 库存量> \n#7、<添加鲜花图片 花的序号  图片> \n\n#8、<查询顾客@xxx>\n#9、<添加顾客 qq 用户名 电话 地址>\n#10、<删除顾客 qq>\n#11、<修改顾客 qq 用户名 电话 地址> \n\n#12、<查询订单@xxx>\n#13、<添加订单 用户名 花的序号 订单时间 送货地址 数量>  \n#14、<删除订单 订单号>\n#15、<修改订单 订单号 用户名 花的序号 订单时间 送货地址 数量>\n\n16、<帮助>获取帮助信息\n#17、<重置状态@xxx> 重置用户信息\n#18、<启用/禁用花店功能>\n19、<结算>\n#20、<统计图>\n#注 带#的指令为管理员指令\n")])]),t._v(" "),_("div",{staticClass:"line-numbers-wrapper"},[_("span",{staticClass:"line-number"},[t._v("1")]),_("br"),_("span",{staticClass:"line-number"},[t._v("2")]),_("br"),_("span",{staticClass:"line-number"},[t._v("3")]),_("br"),_("span",{staticClass:"line-number"},[t._v("4")]),_("br"),_("span",{staticClass:"line-number"},[t._v("5")]),_("br"),_("span",{staticClass:"line-number"},[t._v("6")]),_("br"),_("span",{staticClass:"line-number"},[t._v("7")]),_("br"),_("span",{staticClass:"line-number"},[t._v("8")]),_("br"),_("span",{staticClass:"line-number"},[t._v("9")]),_("br"),_("span",{staticClass:"line-number"},[t._v("10")]),_("br"),_("span",{staticClass:"line-number"},[t._v("11")]),_("br"),_("span",{staticClass:"line-number"},[t._v("12")]),_("br"),_("span",{staticClass:"line-number"},[t._v("13")]),_("br"),_("span",{staticClass:"line-number"},[t._v("14")]),_("br"),_("span",{staticClass:"line-number"},[t._v("15")]),_("br"),_("span",{staticClass:"line-number"},[t._v("16")]),_("br"),_("span",{staticClass:"line-number"},[t._v("17")]),_("br"),_("span",{staticClass:"line-number"},[t._v("18")]),_("br"),_("span",{staticClass:"line-number"},[t._v("19")]),_("br"),_("span",{staticClass:"line-number"},[t._v("20")]),_("br"),_("span",{staticClass:"line-number"},[t._v("21")]),_("br"),_("span",{staticClass:"line-number"},[t._v("22")]),_("br"),_("span",{staticClass:"line-number"},[t._v("23")]),_("br"),_("span",{staticClass:"line-number"},[t._v("24")]),_("br"),_("span",{staticClass:"line-number"},[t._v("25")]),_("br")])]),_("h2",{attrs:{id:"项目总结"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#项目总结"}},[t._v("#")]),t._v(" 项目总结")]),t._v(" "),_("p",[t._v("1.浏览鲜花信息")]),t._v(" "),_("p",[t._v("​\t\t用户可以通过输入鲜花名称，查询鲜花信息，包括序号、花名、颜色、价格、库存量等。同时，系统支持以图片形式展示鲜花信息，提高用户体验。")]),t._v(" "),_("p",[t._v("2.购买鲜花")]),t._v(" "),_("p",[t._v("​\t\t用户可以通过购买指令，在商城中选择需要购买的鲜花，支持一次购买多种不同鲜花。系统支持订单生成和保存，同时支持在购买过程中取消订单，保证用户的购物体验。")]),t._v(" "),_("p",[t._v("3.取消订单")]),t._v(" "),_("p",[t._v("​\t\t如果用户在购买鲜花的过程中遇到了问题，可以通过取消订单指令，将已生成的订单取消，保证用户的权益。")]),t._v(" "),_("p",[t._v("4.查询订单")]),t._v(" "),_("p",[t._v("​\t\t用户可以通过查询订单指令，查看已生成的订单信息，包括订单号、下单时间、订单状态等。")]),t._v(" "),_("p",[t._v("5.支付")]),t._v(" "),_("p",[t._v("​\t\t在用户购买鲜花成功后，系统发出支付宝url进行支付")]),t._v(" "),_("p",[t._v("6.添加鲜花信息")]),t._v(" "),_("p",[t._v("​\t\t管理员可以通过添加鲜花信息指令，添加新的鲜花信息到商城中，包括花名、颜色、价格、库存量等。")]),t._v(" "),_("p",[t._v("7.添加鲜花图片")]),t._v(" "),_("p",[t._v("​\t\t管理员可以通过添加鲜花图片指令，为商城中已有的鲜花添加图片信息。")]),t._v(" "),_("p",[t._v("总结：")]),t._v(" "),_("p",[t._v("​\t\t该项目是一个使用Python编写的鲜花商城，采用Nonebot框架实现。项目实现了鲜花浏览、购买、取消订单、查询鲜花信息等多种功能，同时支持添加鲜花信息、添加鲜花图片等管理员功能。")]),t._v(" "),_("p",[t._v("支付有一点欠缺的地方，url过于长，如果")])])}),[],!1,null,null,null);_.default=s.exports}}]);